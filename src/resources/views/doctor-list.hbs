<div class='patient-list fadeInDown main-content'>
	<div class='container mt-3 white-background patient-list__container' style='@media (min-width: 992px) {min-width: 1140px;}'>
		<h1 class='patient-list__title'>DANH SÁCH BÁC SĨ </h1>
		<a class='add-patient' href='/bac-si/them'>Thêm bác sĩ</a>
		<table class='table patient-list__table'>
			<thead>
				<tr>
					<th>STT</th>
					<th>MSBS</th>
					<th>Tên bác sĩ</th>
					<th>Chuyên khoa</th>
					<th style="width: 60px;"></th>
					<th style="width: 60px;"></th>
				</tr>
			</thead>
			<tbody>
				{{#each doctors}}
					<tr>
						<th>{{inc @index}}</th>
						<td>{{this.doctor_id}}</td>
						<td>{{this.first-name}} {{this.last-name}}</td>
						<td>{{this.faculty}}</td>
						<td>
							<a href='/bac-si/{{this.doctor_id}}/chinh-sua'>Sửa</a>
						</td>
						<td>
							<a
								href='/bac-si'
								id="delete-link"
								data-id='{{this.doctor_id}}'
								data-toggle='modal'
								data-target='#confirm-delete'
							>Xóa</a>
						</td>
					</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
</div>

		<form name="delete-patient-form" method="POST"></form>

<div id='confirm-delete' class='modal' tabindex='-1' role='dialog'>
	<div class='modal-dialog' role='document'>
		<div class='modal-content'>
			<div class='modal-header'>
				<h5 class='modal-title'>Xác nhận xóa</h5>
				<button type='button' class='close' data-dismiss='modal' aria-label='Close'>
					<span aria-hidden='true'>&times;</span>
				</button>
			</div>
			<div class='modal-body'>
				<p>Bạn có chắc muốn xóa bác sĩ này?</p>
			</div>
			<div class='modal-footer'>
				<button id="delete-patient-btn" class='btn btn-danger'>Xóa</button>
				<button type='button' class='btn btn-secondary' data-dismiss='modal'>Hủy</button>
			</div>
		</div>
	</div>
</div>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		var id
		var deleteForm = document.forms['delete-patient-form']
		var deletePatientBtn = document.getElementById('delete-patient-btn')

		$('#confirm-delete').on('show.bs.modal', function (event) { 
			var button = $(event.relatedTarget) 
			id = button.data('id') 
		})
		deletePatientBtn.onclick = function() {
			deleteForm.action = '/bac-si/' + id + '?_method=DELETE'
			deleteForm.submit()
		}
	})
</script>